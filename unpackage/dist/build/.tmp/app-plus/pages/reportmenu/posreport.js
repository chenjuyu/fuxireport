(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reportmenu/posreport"],{5560:function(t,e,i){"use strict";i.r(e);var o=i("ac10"),n=i("b665");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("9783");var r=i("2877"),a=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,null,null);e["default"]=a.exports},8920:function(t,e,i){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("2f62"),s=r(i("83fa"));function r(t){return t&&t.__esModule?t:{default:t}}var a,l=function(){return i.e("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(i.bind(null,"1218"))},u=function(){return i.e("node-modules/@dcloudio/uni-ui/lib/uni-nav-bar/uni-nav-bar").then(i.bind(null,"4d03"))},c=function(){return i.e("components/uni-segmented-control/uni-segmented-control").then(i.bind(null,"81bf"))},h=function(){return Promise.all([i.e("common/vendor"),i.e("components/chunLei-popups/chunLei-popups")]).then(i.bind(null,"b091"))},d=s.default.formatDate(new Date,"yyyy-MM-dd"),p=t.getSystemInfoSync(),g=p.screenWidth,f=p.screenHeight,m=p.windowWidth,v=p.windowHeight,y=(p.navigationBarHeight,[]),D={computed:(0,n.mapState)(["forcedLogin","hasLogin","userName","userinfor"]),components:{uniNavBar:u,uniSegmentedControl:c,popups:h,uniLoadMore:l},data:function(){return{items0:["今天","昨天","近7天","近30天","自定义"],current0:0,items:["店铺","品类","品牌","厂商","导购","销售排行"],current:0,BeginDate:d,EndDate:d,condition:[],strcondition:"",loggingtype:"more",scrollTop:0,old:{scrollTop:0},height:Number(v)-Number(160),datalist:[],currpage:1,totalQty:0,totalAmt:0,isDoRefresh:!0,headtitle:[{title:"名次"},{title:"店铺"},{title:"数量"},{title:"金额"}],txtwidht:150,chosemenu:[{title:"店铺类别"},{title:"店铺"}],sortmenu:[{title:"金额"},{title:"数量"}],screenHeight:f,showflag:!1,vsortshow:!1,descflag:!0,x:Number(g)-Number(g/5),x2:Number(g)/5,y:Number(f)-Number(80)}},onLoad:function(t){a=this,console.log(o("x宽度:"+this.x," at pages\\reportmenu\\posreport.vue:134")),console.log(o("y高度:"+this.y," at pages\\reportmenu\\posreport.vue:135")),console.log(o("可用宽度:"+m," at pages\\reportmenu\\posreport.vue:136")),console.log(o("可用高度:"+v," at pages\\reportmenu\\posreport.vue:137")),console.log(o("高度:"+this.height," at pages\\reportmenu\\posreport.vue:138"))},onReady:function(){console.log(o("onReady"," at pages\\reportmenu\\posreport.vue:141")),console.log(o("state中的userinfor:"+JSON.stringify(this.userinfor)," at pages\\reportmenu\\posreport.vue:142"))},onBackPress:function(){console.log(o("onBackPress"," at pages\\reportmenu\\posreport.vue:144"))},onReachBottom:function(){a.currpage=Number(a.currpage)+Number(1);var e=this.datalist.length;e<=this.totallist.length?(t.showLoading({title:"正在加载...",mask:!0}),setTimeout(function(){if(1==a.currpage)a.getData();else if(a.currpage>1)for(var t=a.pagination(a.currpage,15,a.totallist),e=0;e<t.length;e++)a.datalist.push(t[e])},2e3),t.hideLoading(),this.loggingtype="more"):t.showToast({icon:"none",title:"没有更多数据了",duration:2e3})},onShow:function(){if(console.log(o("condition:"+this.condition," at pages\\reportmenu\\posreport.vue:180")),console.log(o("this.isDoRefresh的值:"+this.isDoRefresh," at pages\\reportmenu\\posreport.vue:181")),this.isDoRefresh){if(a.currpage=1,this.condition.length>0){var t="";if(this.condition.length>1){for(var e=0;e<this.condition.length;e++)t=e==this.condition.length-1?t+"'"+this.condition[e]+"'":t+"'"+this.condition[e]+"',",console.log(o("str1:"+t," at pages\\reportmenu\\posreport.vue:195"));this.strcondition=t}else this.strcondition="'"+this.condition[0]+"'";console.log(o("改变后的this.strcondition:"+this.strcondition," at pages\\reportmenu\\posreport.vue:201"))}a.getData()}},onNavigationBarButtonTap:function(t){this.rightclick()},methods:{widthstyle:function(t){return 1==t?400:0!=t&&1!=t?150:void 0},inputPopup:function(t){this.showflag=t,this.vsortshow=t},Popup:function(e){var i="";"店铺"==e.title?i="getWarehouse":"品类"==e.title?i="getGoodsType":"品牌"==e.title?i="getBrand":"厂商"==e.title?i="getGoodsSupplier":"导购"==e.title?i="getEmployee":"货号"==e.title&&(i="getPosSalesGoods"),t.navigateTo({url:"../select/select?send="+i}),this.showflag=!1},Popup2:function(t){this.vsortshow=!1,"金额"==t.title&&this.descflag?(this.descflag=!1,this.datalist.sort(this.compare("FactAmount"))):"金额"!=t.title||this.descflag?"数量"==t.title&&this.descflag?(this.descflag=!1,this.datalist.sort(this.compare("Quantity"))):"数量"!=t.title||this.descflag||(this.descflag=!0,this.datalist.sort(this.compare("Quantity")).reverse()):(this.descflag=!0,this.datalist.sort(this.compare("FactAmount")).reverse())},compare:function(t){return function(e,i){var o=e[t],n=i[t];return o-n}},sitemclick:function(e){console.log(o(JSON.stringify(e)," at pages\\reportmenu\\posreport.vue:285")),console.log(o("hostName:"+this.userinfor.hostName," at pages\\reportmenu\\posreport.vue:286")),"销售排行"!=this.items[this.current]&&t.navigateTo({url:"posreportdetail?id="+e.keyid})},longpress:function(t){console.log(o("长按的操作:"+JSON.stringify(t)," at pages\\reportmenu\\posreport.vue:296"))},chose:function(t){1==t?this.showflag=!0:2==t&&(this.vsortshow=!0)},leftclick:function(){t.navigateBack({delta:1})},rightclick:function(){},onClickItem:function(t){if(this.current!==t){if(this.current=t,0==this.current)this.headtitle=[{title:"名次"},{title:"店铺"},{title:"数量"},{title:"金额"}],this.chosemenu=[{title:"店铺类别"},{title:"店铺"}],this.$refs.vpop.popupsPosition();else if(1==this.current){this.headtitle=[{title:"名次"},{title:"品类"},{title:"数量"},{title:"金额"},{title:"占比%"}],this.chosemenu=[{title:"品类"}],this.$refs.vpop.popupsPosition();for(var e=0;e<this.datalist.length;e++)Vue.set(this.datalist[e],"LvStr","100%")}else 2==this.current?(this.headtitle=[{title:"名次"},{title:"品牌"},{title:"数量"},{title:"金额"},{title:"占比%"}],this.chosemenu=[{title:"品牌"}],this.$refs.vpop.popupsPosition()):3==this.current?(this.headtitle=[{title:"名次"},{title:"厂商"},{title:"数量"},{title:"金额"},{title:"占比%"}],this.chosemenu=[{title:"厂商"}],this.$refs.vpop.popupsPosition()):4==this.current?(this.headtitle=[{title:"名次"},{title:"导购"},{title:"数量"},{title:"金额"}],this.chosemenu=[{title:"导购"}],this.$refs.vpop.popupsPosition()):5==this.current&&(this.headtitle=[{title:"名次"},{title:"货号"},{title:"数量"},{title:"零售价"},{title:"平均售价"}],this.chosemenu=[{title:"货号"}],this.$refs.vpop.popupsPosition());a.currpage=1,this.strcondition="",a.getData()}},onClickItem0:function(e){if(this.current0!==e&&(this.current0=e),0==e)this.BeginDate=d,this.EndDate=d,a.currpage=1,a.getData();else if(1==e){var i=new Date;s.default.AddDays(i,-1),this.BeginDate=s.default.formatDate(i,"yyyy-MM-dd"),this.EndDate=s.default.formatDate(i,"yyyy-MM-dd"),a.currpage=1,a.getData()}else if(2==e){var n=new Date;s.default.AddDays(n,-7),this.BeginDate=s.default.formatDate(n,"yyyy-MM-dd"),this.EndDate=s.default.formatDate(new Date,"yyyy-MM-dd"),a.currpage=1,a.getData()}else if(3==e){n=new Date;s.default.AddDays(n,-30),this.BeginDate=s.default.formatDate(n,"yyyy-MM-dd"),this.EndDate=s.default.formatDate(new Date,"yyyy-MM-dd"),a.currpage=1,a.getData()}else 4==e&&(console.log(o("index==4:"," at pages\\reportmenu\\posreport.vue:396")),t.navigateTo({url:"../select/selectdate"}))},getData:function(){t.showLoading({title:"正在加载",mask:!0}),a.datalist.splice(0,a.datalist.length),t.request({url:t.getStorageSync("ip")+"/salesTicket.do?report88",data:{hostName:t.getStorageSync("hostName"),BeginDate:this.BeginDate,EndDate:this.EndDate,disType:this.items[this.current],Condition:this.strcondition},method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",token:t.getStorageSync("token")},success:function(e){if(y=e.data.obj||[],0!=y.length){for(var i=a.pagination(a.currpage,15,y),o=0;o<i.length;o++)a.datalist.push(i[o]);a.total(),t.hideLoading()}else t.showToast({icon:"none",title:"暂无数据返回"})},fail:function(e){t.showToast({icon:"none",title:"网络请求异常"}),t.hideLoading()}}),t.hideLoading()},pagination:function(t,e,i){var o=(t-1)*e;return o+e>=i.length?i.slice(o,i.length):i.slice(o,o+e)},total:function(){for(var t=0,e=0,i=0;i<y.length;i++)t=Number(t)+Number(y[i].Quantity),e=Number(e)+Number(y[i].FactAmount);t&&(a.totalQty=t),e&&(a.totalAmt=parseFloat(e).toFixed(2))}}};e.default=D}).call(this,i("6e42")["default"],i("0de9")["default"])},9783:function(t,e,i){"use strict";var o=i("c9d9"),n=i.n(o);n.a},ac10:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.headtitle,function(e,i){var o=t.widthstyle(i);return{$orig:t.__get_orig(e),m0:o}}));t.$mp.data=Object.assign({},{$root:{l0:i}})},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},b57c:function(t,e,i){"use strict";(function(t){i("42c6"),i("921b");o(i("66fd"));var e=o(i("5560"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},b665:function(t,e,i){"use strict";i.r(e);var o=i("8920"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);e["default"]=n.a},c9d9:function(t,e,i){}},[["b57c","common/runtime","common/vendor"]]]);