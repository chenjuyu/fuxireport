(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reportmenu/posreport"],{"0147":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n})},5560:function(t,e,o){"use strict";o.r(e);var i=o("0147"),n=o("b665");for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);o("9783");var r=o("2877"),a=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=a.exports},8920:function(t,e,o){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("2f62"),s=r(o("83fa"));function r(t){return t&&t.__esModule?t:{default:t}}var a,l=function(){return o.e("node-modules/@dcloudio/uni-ui/lib/uni-load-more/uni-load-more").then(o.bind(null,"1218"))},u=function(){return o.e("node-modules/@dcloudio/uni-ui/lib/uni-nav-bar/uni-nav-bar").then(o.bind(null,"4d03"))},c=function(){return o.e("components/uni-segmented-control/uni-segmented-control").then(o.bind(null,"81bf"))},p=function(){return Promise.all([o.e("common/vendor"),o.e("components/chunLei-popups/chunLei-popups")]).then(o.bind(null,"b091"))},d=s.default.formatDate(new Date,"yyyy-MM-dd"),h=t.getSystemInfoSync(),g=h.screenWidth,f=h.screenHeight,m=h.windowWidth,v=h.windowHeight,y=(h.navigationBarHeight,{computed:(0,n.mapState)(["forcedLogin","hasLogin","userName","userinfor"]),components:{uniNavBar:u,uniSegmentedControl:c,popups:p,uniLoadMore:l},data:function(){return{items0:["今天","昨天","近7天","近30天","自定义"],current0:0,items:["店铺","品类","品牌","厂商","导购","销售排行"],current:0,BeginDate:d,EndDate:d,condition:[],strcondition:"",loggingtype:"more",scrollTop:0,old:{scrollTop:0},height:Number(v)-Number(160),datalist:[],totallist:[],currpage:1,totalQty:0,totalAmt:0,isDoRefresh:!0,headtitle:[{title:"名次"},{title:"店铺"},{title:"数量"},{title:"金额"}],txtwidht:200,chosemenu:[{title:"店铺类别"},{title:"店铺"}],screenHeight:f,showflag:!1,x:Number(g)-Number(g/5),y:Number(f)-Number(80)}},onLoad:function(t){a=this,console.log(i("x宽度:"+this.x," at pages\\reportmenu\\posreport.vue:128")),console.log(i("y高度:"+this.y," at pages\\reportmenu\\posreport.vue:129")),console.log(i("可用宽度:"+m," at pages\\reportmenu\\posreport.vue:130")),console.log(i("可用高度:"+v," at pages\\reportmenu\\posreport.vue:131")),console.log(i("高度:"+this.height," at pages\\reportmenu\\posreport.vue:132"))},onReady:function(){console.log(i("onReady"," at pages\\reportmenu\\posreport.vue:135")),console.log(i("state中的userinfor:"+JSON.stringify(this.userinfor)," at pages\\reportmenu\\posreport.vue:136"))},onBackPress:function(){console.log(i("onBackPress"," at pages\\reportmenu\\posreport.vue:138"))},onReachBottom:function(){a.currpage=Number(a.currpage)+Number(1);var e=this.datalist.length;e<=this.totallist.length?(t.showLoading({title:"正在加载...",mask:!0}),setTimeout(function(){if(1==a.currpage)a.getData();else if(a.currpage>1)for(var t=a.pagination(a.currpage,15,a.totallist),e=0;e<t.length;e++)a.datalist.push(t[e])},2e3),t.hideLoading(),this.loggingtype="more"):t.showToast({icon:"none",title:"没有更多数据了",duration:2e3})},onShow:function(){if(console.log(i("condition:"+this.condition," at pages\\reportmenu\\posreport.vue:174")),console.log(i("this.isDoRefresh的值:"+this.isDoRefresh," at pages\\reportmenu\\posreport.vue:175")),this.isDoRefresh){if(a.currpage=1,this.condition.length>0){var t="";if(this.condition.length>1){for(var e=0;e<this.condition.length;e++)t=e==this.condition.length-1?t+"'"+this.condition[e]+"'":t+"'"+this.condition[e]+"',",console.log(i("str1:"+t," at pages\\reportmenu\\posreport.vue:189"));this.strcondition=t}else this.strcondition="'"+this.condition[0]+"'";console.log(i("改变后的this.strcondition:"+this.strcondition," at pages\\reportmenu\\posreport.vue:195"))}a.getData()}},onNavigationBarButtonTap:function(t){this.rightclick()},methods:{inputPopup:function(t){this.showflag=t},Popup:function(e){var o="";"店铺"==e.title?o="getWarehouse":"品类"==e.title?o="getGoodsType":"品牌"==e.title?o="getBrand":"厂商"==e.title?o="getGoodsSupplier":"导购"==e.title?o="getEmployee":"货号"==e.title&&(o="getPosSalesGoods"),t.navigateTo({url:"../select/select?send="+o}),this.showflag=!1},sitemclick:function(e){console.log(i(JSON.stringify(e)," at pages\\reportmenu\\posreport.vue:246")),console.log(i("hostName:"+this.userinfor.hostName," at pages\\reportmenu\\posreport.vue:247")),"销售排行"!=this.items[this.current]&&t.navigateTo({url:"posreportdetail?id="+e.keyid})},longpress:function(t){console.log(i("长按的操作:"+JSON.stringify(t)," at pages\\reportmenu\\posreport.vue:257"))},chose:function(){this.showflag=!0},leftclick:function(){t.navigateBack({delta:1})},rightclick:function(){},onClickItem:function(t){if(this.current!==t){if(this.current=t,0==this.current)this.headtitle=[{title:"名次"},{title:"店铺"},{title:"数量"},{title:"金额"}],this.chosemenu=[{title:"店铺类别"},{title:"店铺"}],this.$refs.vpop.popupsPosition();else if(1==this.current){this.headtitle=[{title:"名次"},{title:"品类"},{title:"数量"},{title:"金额"},{title:"占比%"}],this.chosemenu=[{title:"品类"}],this.$refs.vpop.popupsPosition();for(var e=0;e<this.datalist.length;e++)Vue.set(this.datalist[e],"LvStr","100%")}else 2==this.current?(this.headtitle=[{title:"名次"},{title:"品牌"},{title:"数量"},{title:"金额"},{title:"占比%"}],this.chosemenu=[{title:"品牌"}],this.$refs.vpop.popupsPosition()):3==this.current?(this.headtitle=[{title:"名次"},{title:"厂商"},{title:"数量"},{title:"金额"},{title:"占比%"}],this.chosemenu=[{title:"厂商"}],this.$refs.vpop.popupsPosition()):4==this.current?(this.headtitle=[{title:"名次"},{title:"导购"},{title:"数量"},{title:"金额"}],this.chosemenu=[{title:"导购"}],this.$refs.vpop.popupsPosition()):5==this.current&&(this.headtitle=[{title:"名次"},{title:"货号"},{title:"数量"},{title:"零售价"},{title:"平均售价"}],this.chosemenu=[{title:"货号"}],this.$refs.vpop.popupsPosition());a.currpage=1,this.strcondition="",a.getData()}},onClickItem0:function(e){if(this.current0!==e&&(this.current0=e),0==e)this.BeginDate=d,this.EndDate=d,a.currpage=1,a.getData();else if(1==e){var o=new Date;s.default.AddDays(o,-1),this.BeginDate=s.default.formatDate(o,"yyyy-MM-dd"),this.EndDate=s.default.formatDate(o,"yyyy-MM-dd"),a.currpage=1,a.getData()}else if(2==e){var n=new Date;s.default.AddDays(n,-7),this.BeginDate=s.default.formatDate(n,"yyyy-MM-dd"),this.EndDate=s.default.formatDate(new Date,"yyyy-MM-dd"),a.currpage=1,a.getData()}else if(3==e){n=new Date;s.default.AddDays(n,-30),this.BeginDate=s.default.formatDate(n,"yyyy-MM-dd"),this.EndDate=s.default.formatDate(new Date,"yyyy-MM-dd"),a.currpage=1,a.getData()}else 4==e&&(console.log(i("index==4:"," at pages\\reportmenu\\posreport.vue:353")),t.navigateTo({url:"../select/selectdate"}))},getData:function(){t.showLoading({title:"正在加载",mask:!0}),a.datalist.splice(0,a.datalist.length),t.request({url:t.getStorageSync("ip")+"/salesTicket.do?report88",data:{hostName:t.getStorageSync("hostName"),BeginDate:this.BeginDate,EndDate:this.EndDate,disType:this.items[this.current],Condition:this.strcondition},method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",token:t.getStorageSync("token")},success:function(e){if(a.totallist=e.data.obj||[],0!=a.totallist.length){for(var o=a.pagination(a.currpage,15,a.totallist),i=0;i<o.length;i++)a.datalist.push(o[i]);a.total(),t.hideLoading()}else t.showToast({icon:"none",title:"暂无数据返回"})},fail:function(e){t.showToast({icon:"none",title:"网络请求异常"}),t.hideLoading()}}),t.hideLoading()},pagination:function(t,e,o){var i=(t-1)*e;return i+e>=o.length?o.slice(i,o.length):o.slice(i,i+e)},total:function(){for(var t=0,e=0,o=0;o<a.totallist.length;o++)t=Number(t)+Number(a.totallist[o].Quantity),e=Number(e)+Number(a.totallist[o].FactAmount);t&&(a.totalQty=t),e&&(a.totalAmt=parseFloat(e).toFixed(2))}}});e.default=y}).call(this,o("6e42")["default"],o("0de9")["default"])},9783:function(t,e,o){"use strict";var i=o("c9d9"),n=o.n(i);n.a},b57c:function(t,e,o){"use strict";(function(t){o("42c6"),o("921b");i(o("66fd"));var e=i(o("5560"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},b665:function(t,e,o){"use strict";o.r(e);var i=o("8920"),n=o.n(i);for(var s in i)"default"!==s&&function(t){o.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},c9d9:function(t,e,o){}},[["b57c","common/runtime","common/vendor"]]]);